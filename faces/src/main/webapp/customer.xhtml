<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="jakarta.faces.facelets"
      xmlns:f="jakarta.faces.core"
      xmlns:h="jakarta.faces.html">
<f:view>
    <f:metadata>
        <f:event listener="#{customerBean.init}" type="preRenderView"/>
    </f:metadata>
    <h:head>
        <title>Express Language 6.0 with empty Optional!</title>
    </h:head>
    <h:body>
        <h1>Express Language 6.0</h1>

        <div>
            <strong>#{customerBean.person.firstName.concat(customerBean.person.lastName)}</strong>
            <hr/>
        </div>
        <div>PhoneNumber: #{customerBean.person.phoneNumber.map(p-> '('.concat(p.countryCode).concat(')').concat(p.number)).orElse('NotFound')}</div>
        <div>Emails: (#{customerBean.person.emailAddresses.length})</div>
        <ul>
            <ui:repeat value="#{customerBean.person.emailAddresses}" var="email">
                <li>#{email.email}(#{email.primary?'O':'X'})</li>
            </ui:repeat>
        </ul>
        <div>Address:</div>
        <div>
            #{customerBean.person.address.street}<br/>
            #{customerBean.person.address.city}<br/>
            #{customerBean.person.address.state} #{' '} #{customerBean.person.address.zipCode}
        </div>
    </h:body>
</f:view>
</html>
